(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9690:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var r=a(95155),t=a(12115),i=a(35695),l=a(93004),n=a(35317),d=a(56104),c=a(30285),o=a(66695),u=a(62523),m=a(85057),h=a(17313),x=a(87481),p=a(4637),f=a(50172),v=a(22100),j=a(30356),g=a(25738);let b=()=>(0,r.jsx)("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 110.3 512 0 401.7 0 265.8 0 129.8 110.3 20 244 20c68.3 0 128.8 27.2 172.4 71.4l-64.5 64.5C323.5 125.7 286.4 104 244 104c-82.3 0-149.3 67-149.3 149.8s67 149.8 149.3 149.8c94.2 0 127.3-64.8 132.8-97.8H244v-75h244.1c2.1 12.8 3.9 26.1 3.9 40z"})}),y=()=>(0,r.jsxs)("div",{className:"relative my-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Oder"})})]});function w(){let[e,s]=(0,t.useState)(""),[a,w]=(0,t.useState)(""),[N,k]=(0,t.useState)(""),[C,A]=(0,t.useState)(""),[S,R]=(0,t.useState)(""),[E,G]=(0,t.useState)("student"),[M,D]=(0,t.useState)(""),[F,z]=(0,t.useState)([]),[q,H]=(0,t.useState)(!1),[J,L]=(0,t.useState)(!1),B=(0,i.useRouter)(),{toast:I}=(0,x.dj)(),{isFirebaseEnabled:P,firebaseError:W}=(0,v.A)();(0,t.useEffect)(()=>{P&&(async()=>{let e=(0,n.rJ)(d.db,"schools");z((await (0,n.GG)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,s)=>e.name.localeCompare(s.name)))})()},[P]);let O=async s=>{s.preventDefault(),H(!0);try{await (0,l.x9)(d.j2,e,a),B.push("/dashboard")}catch(e){I({variant:"destructive",title:"Fehler bei der Anmeldung",description:e.message})}finally{H(!1)}},X=async(e,s)=>{let a=await (0,n.gS)((0,n.rJ)(d.db,"schools"),{name:e,address:s}),r={id:a.id,name:e,address:s};return z(e=>[...e,r].sort((e,s)=>e.name.localeCompare(s.name))),a.id},Z=async e=>{e.preventDefault(),H(!0);try{let e=(await (0,l.eJ)(d.j2,N,C)).user;await (0,l.r7)(e,{displayName:S}),await (0,n.BN)((0,n.H9)(d.db,"users",e.uid,"settings","main"),{selectedGradeLevel:10,mainSubjectWeight:2,minorSubjectWeight:1,theme:"blue",isDarkMode:!1,role:E,schoolId:M}),await (0,n.BN)((0,n.H9)(d.db,"profiles",e.uid),{uid:e.uid,name:S,email:N,bio:"Hallo, ich bin ".concat(S,"! Ich benutze Notio, um meinen Schulerfolg zu organisieren.")}),B.push("/dashboard")}catch(e){I({variant:"destructive",title:"Fehler bei der Registrierung",description:e.message})}finally{H(!1)}},_=async()=>{if(!P)return;L(!0);let e=new l.HF;try{let s=(await (0,l.df)(d.j2,e)).user,a=(0,n.H9)(d.db,"users",s.uid,"settings","main");(await (0,n.x7)(a)).exists()||await (0,n.BN)(a,{selectedGradeLevel:10,mainSubjectWeight:2,minorSubjectWeight:1,theme:"blue",isDarkMode:!1,role:"student",schoolId:""});let r=(0,n.H9)(d.db,"profiles",s.uid);(await (0,n.x7)(r)).exists()||await (0,n.BN)(r,{uid:s.uid,name:s.displayName,email:s.email,bio:"Hallo, ich bin ".concat(s.displayName,"! Ich benutze Notio, um meinen Schulerfolg zu organisieren.")}),B.push("/dashboard")}catch(e){I({variant:"destructive",title:"Fehler bei der Google-Anmeldung",description:e.message})}finally{L(!1)}};return P?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted/40 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)(p.g,{}),(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"Notio"})]}),(0,r.jsxs)(h.tU,{defaultValue:"login",className:"w-full max-w-sm",children:[(0,r.jsxs)(h.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(h.Xi,{value:"login",children:"Anmelden"}),(0,r.jsx)(h.Xi,{value:"register",children:"Registrieren"})]}),(0,r.jsx)(h.av,{value:"login",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Anmelden"}),(0,r.jsx)(o.BT,{children:"Melde dich bei deinem Konto an, um fortzufahren."})]}),(0,r.jsxs)(o.Wu,{children:[(0,r.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"login-email",children:"Email"}),(0,r.jsx)(u.p,{id:"login-email",type:"email",placeholder:"deine@email.de",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"login-password",children:"Passwort"}),(0,r.jsx)(u.p,{id:"login-password",type:"password",value:a,onChange:e=>w(e.target.value),required:!0})]}),(0,r.jsxs)(c.$,{type:"submit",className:"w-full",disabled:q||J,children:[q&&(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]}),(0,r.jsx)(y,{}),(0,r.jsxs)(c.$,{variant:"outline",className:"w-full",onClick:_,disabled:q||J,children:[J?(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(b,{}),"Mit Google anmelden"]})]})]})}),(0,r.jsx)(h.av,{value:"register",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Konto erstellen"}),(0,r.jsx)(o.BT,{children:"Gib deine Daten ein, um ein neues Konto zu erstellen."})]}),(0,r.jsxs)(o.Wu,{children:[(0,r.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"signup-name",children:"Name"}),(0,r.jsx)(u.p,{id:"signup-name",placeholder:"Max Mustermann",value:S,onChange:e=>R(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"signup-email",children:"Email"}),(0,r.jsx)(u.p,{id:"signup-email",type:"email",placeholder:"deine@email.de",value:N,onChange:e=>k(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"signup-password",children:"Passwort"}),(0,r.jsx)(u.p,{id:"signup-password",type:"password",value:C,onChange:e=>A(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{children:"Ich bin"}),(0,r.jsxs)(j.z,{onValueChange:e=>G(e),defaultValue:E,className:"flex space-x-4 pt-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(j.C,{value:"student",id:"role-student-signup"}),(0,r.jsx)(m.J,{htmlFor:"role-student-signup",className:"font-normal",children:"Sch\xfcler"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(j.C,{value:"teacher",id:"role-teacher-signup"}),(0,r.jsx)(m.J,{htmlFor:"role-teacher-signup",className:"font-normal",children:"Lehrer"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{children:"Schule"}),(0,r.jsx)(g.c,{schools:F,value:M,onChange:D,onAddSchool:X})]}),(0,r.jsxs)(c.$,{type:"submit",className:"w-full",disabled:q||J,children:[q&&(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]}),(0,r.jsx)(y,{}),(0,r.jsxs)(c.$,{variant:"outline",className:"w-full",onClick:_,disabled:q||J,children:[J?(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(b,{}),"Mit Google registrieren"]})]})]})})]})]}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted/40 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,r.jsx)(p.g,{}),(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"Notio"})]}),(0,r.jsxs)("div",{className:"max-w-md w-full bg-card p-8 rounded-lg shadow-lg text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Demo Modus"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:W?"Firebase Fehler: ".concat(W):"Firebase ist nicht konfiguriert. Die App l\xe4uft im Offline-Demo-Modus."}),(0,r.jsx)(c.$,{onClick:()=>B.push("/dashboard"),className:"mt-6",children:"Weiter zum Dashboard"})]})]})}},11275:(e,s,a)=>{"use strict";a.d(s,{X:()=>i});var r=a(12115),t=a(52712);function i(e){let[s,a]=r.useState(void 0);return(0,t.N)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let r,t;if(!Array.isArray(s)||!s.length)return;let i=s[0];if("borderBoxSize"in i){let e=i.borderBoxSize,s=Array.isArray(e)?e[0]:e;r=s.inlineSize,t=s.blockSize}else r=e.offsetWidth,t=e.offsetHeight;a({width:r,height:t})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}a(void 0)},[e]),s}},25318:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},34301:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},35695:(e,s,a)=>{"use strict";var r=a(18999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})},40968:(e,s,a)=>{"use strict";a.d(s,{b:()=>n});var r=a(12115),t=a(63540),i=a(95155),l=r.forwardRef((e,s)=>(0,i.jsx)(t.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=l},45503:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(12115);function t(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}},54059:(e,s,a)=>{"use strict";a.d(s,{C1:()=>B,bL:()=>J,q7:()=>L});var r=a(12115),t=a(85185),i=a(6101),l=a(46081),n=a(63540),d=a(89196),c=a(5845),o=a(94315),u=a(11275),m=a(45503),h=a(28905),x=a(95155),p="Radio",[f,v]=(0,l.A)(p),[j,g]=f(p),b=r.forwardRef((e,s)=>{let{__scopeRadio:a,name:l,checked:d=!1,required:c,disabled:o,value:u="on",onCheck:m,form:h,...p}=e,[f,v]=r.useState(null),g=(0,i.s)(s,e=>v(e)),b=r.useRef(!1),y=!f||h||!!f.closest("form");return(0,x.jsxs)(j,{scope:a,checked:d,disabled:o,children:[(0,x.jsx)(n.sG.button,{type:"button",role:"radio","aria-checked":d,"data-state":k(d),"data-disabled":o?"":void 0,disabled:o,value:u,...p,ref:g,onClick:(0,t.m)(e.onClick,e=>{d||null==m||m(),y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),y&&(0,x.jsx)(N,{control:f,bubbles:!b.current,name:l,value:u,checked:d,required:c,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});b.displayName=p;var y="RadioIndicator",w=r.forwardRef((e,s)=>{let{__scopeRadio:a,forceMount:r,...t}=e,i=g(y,a);return(0,x.jsx)(h.C,{present:r||i.checked,children:(0,x.jsx)(n.sG.span,{"data-state":k(i.checked),"data-disabled":i.disabled?"":void 0,...t,ref:s})})});w.displayName=y;var N=e=>{let{control:s,checked:a,bubbles:t=!0,...i}=e,l=r.useRef(null),n=(0,m.Z)(a),d=(0,u.X)(s);return r.useEffect(()=>{let e=l.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==a&&s){let r=new Event("click",{bubbles:t});s.call(e,a),e.dispatchEvent(r)}},[n,a,t]),(0,x.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(e){return e?"checked":"unchecked"}var C=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],A="RadioGroup",[S,R]=(0,l.A)(A,[d.RG,v]),E=(0,d.RG)(),G=v(),[M,D]=S(A),F=r.forwardRef((e,s)=>{let{__scopeRadioGroup:a,name:r,defaultValue:t,value:i,required:l=!1,disabled:u=!1,orientation:m,dir:h,loop:p=!0,onValueChange:f,...v}=e,j=E(a),g=(0,o.jH)(h),[b,y]=(0,c.i)({prop:i,defaultProp:t,onChange:f});return(0,x.jsx)(M,{scope:a,name:r,required:l,disabled:u,value:b,onValueChange:y,children:(0,x.jsx)(d.bL,{asChild:!0,...j,orientation:m,dir:g,loop:p,children:(0,x.jsx)(n.sG.div,{role:"radiogroup","aria-required":l,"aria-orientation":m,"data-disabled":u?"":void 0,dir:g,...v,ref:s})})})});F.displayName=A;var z="RadioGroupItem",q=r.forwardRef((e,s)=>{let{__scopeRadioGroup:a,disabled:l,...n}=e,c=D(z,a),o=c.disabled||l,u=E(a),m=G(a),h=r.useRef(null),p=(0,i.s)(s,h),f=c.value===n.value,v=r.useRef(!1);return r.useEffect(()=>{let e=e=>{C.includes(e.key)&&(v.current=!0)},s=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)}},[]),(0,x.jsx)(d.q7,{asChild:!0,...u,focusable:!o,active:f,children:(0,x.jsx)(b,{disabled:o,required:c.required,checked:f,...m,...n,name:c.name,ref:p,onCheck:()=>c.onValueChange(n.value),onKeyDown:(0,t.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,t.m)(n.onFocus,()=>{var e;v.current&&(null==(e=h.current)||e.click())})})})});q.displayName=z;var H=r.forwardRef((e,s)=>{let{__scopeRadioGroup:a,...r}=e,t=G(a);return(0,x.jsx)(w,{...t,...r,ref:s})});H.displayName="RadioGroupIndicator";var J=F,L=q,B=H},70154:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},75074:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},80935:(e,s,a)=>{Promise.resolve().then(a.bind(a,9690))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,645,659,572,468,248,441,684,358],()=>s(80935)),_N_E=e.O()}]);