(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{34900:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,34753,23)),Promise.resolve().then(r.t.bind(r,52728,23)),Promise.resolve().then(r.bind(r,52558)),Promise.resolve().then(r.bind(r,78347))},52558:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>v});var a=r(95155),i=r(87481),s=r(12115),n=r(26621),l=r(74466),o=r(25318),u=r(59434);let d=n.Kq,c=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(n.LM,{ref:t,className:(0,u.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...i})});c.displayName=n.LM.displayName;let f=(0,l.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),g=s.forwardRef((e,t)=>{let{className:r,variant:i,...s}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,u.cn)(f({variant:i}),r),...s})});g.displayName=n.bL.displayName,s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,u.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...i})}).displayName=n.rc.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(n.bm,{ref:t,className:(0,u.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...i,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})});p.displayName=n.bm.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,u.cn)("text-sm font-semibold",r),...i})});h.displayName=n.hE.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,u.cn)("text-sm opacity-90",r),...i})});function v(){let{toasts:e}=(0,i.dj)();return(0,a.jsxs)(d,{children:[e.map(function(e){let{id:t,title:r,description:i,action:s,...n}=e;return(0,a.jsxs)(g,{...n,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[r&&(0,a.jsx)(h,{children:r}),i&&(0,a.jsx)(m,{children:i})]}),s,(0,a.jsx)(p,{})]},t)}),(0,a.jsx)(c,{})]})}m.displayName=n.VY.displayName},52728:()=>{},56104:(e,t,r)=>{"use strict";let a,i,s;r.d(t,{Gg:()=>d,db:()=>s,j2:()=>i});var n=r(23915),l=r(93004),o=r(35317);let u={apiKey:"AIzaSyC7L4aJcG5I8pQC4z2mEr4sTq9W1M6mabY",authDomain:"school-d5d37.firebaseapp.com",projectId:"school-d5d37",storageBucket:"school-d5d37.firebasestorage.app",messagingSenderId:"194813242319",appId:"1:194813242319:web:2ccb062a13e6489e0200ba"},d=!!u.apiKey&&!!u.projectId;d?(a=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)(u),i=(0,l.xI)(a),s=(0,o.aU)(a)):(console.warn("Firebase configuration is missing or incomplete. Firebase services will be disabled."),a={},i={},s={})},59434:(e,t,r)=>{"use strict";r.d(t,{_S:()=>u,cd:()=>m,cn:()=>l,eZ:()=>p,j:()=>d,k$:()=>f,y7:()=>c});var a=r(52596),i=r(39688),s=r(35317),n=r(56104);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,a.$)(t))}function o(e){let t={written:{value:0,weight:0},oral:{value:0,weight:0}};for(let r of e){if(null==r.value)continue;let e=r.value*r.weight;"Schulaufgabe"===r.type?(t.written.value+=e,t.written.weight+=r.weight):(t.oral.value+=e,t.oral.weight+=r.weight)}return t}function u(e,t){let r=e.filter(e=>null!=e.value);if(0===r.length)return"-";let a=o(r);if("Hauptfach"===t.category&&null!=t.writtenWeight&&null!=t.oralWeight&&(t.writtenWeight>0||t.oralWeight>0)){let{written:e,oral:r}=a,i=e.weight>0?e.value/e.weight:0,s=r.weight>0?r.value/r.weight:0,n=e.weight>0,l=r.weight>0,o=t.writtenWeight,u=t.oralWeight;if(n&&l){let e=o+u;if(e>0)return((i*o+s*u)/e).toFixed(2)}else if(n)return i.toFixed(2);else if(l)return s.toFixed(2);else return"-"}let i=a.written.value+a.oral.value,s=a.written.weight+a.oral.weight;return 0===s?"-":(i/s).toFixed(2)}function d(e,t,r,a){let i=[];if(e.forEach(e=>{let s=t.filter(t=>t.subjectId===e.id&&null!=t.value);if(s.length>0){let t=u(s,e);if("-"!==t){let s=parseFloat(t.replace(",",".")),n="Hauptfach"===e.category?r:a;n>0&&i.push({average:s,weight:n})}}}),0===i.length)return"-";let s=i.reduce((e,t)=>e+t.average*t.weight,0),n=i.reduce((e,t)=>e+t.weight,0);return 0===n?"-":(s/n).toFixed(2)}function c(e,t){if(0===e.length)return"-";let r=e.map(e=>{let r=t.filter(t=>t.subjectId===e.id&&null!=t.value);if(0===r.length)return null;let a=u(r,e);return"-"!==a?parseFloat(a):null}).filter(e=>null!==e);return 0===r.length?"-":(r.reduce((e,t)=>e+t,0)/r.length).toFixed(2)}function f(e,t,r,a,i){let s;if(a<=0)return null;let n=o(e.filter(e=>null!=e.value));if("Hauptfach"!==t.category||null==t.writtenWeight||null==t.oralWeight){let e=n.written.value+n.oral.value;return(r*(n.written.weight+n.oral.weight+a)-e)/a}let l=t.writtenWeight,u=t.oralWeight;if(l+u<=0)return null;let d=n.written.value,c=n.written.weight,f=n.oral.value,g=n.oral.weight,p=g>0?f/g:0,h=c>0?d/c:0;if("Schulaufgabe"===i){if(l<=0)return p>0?r<=p?1:6:r;s=((g>0?(r*(l+u)-p*u)/l:r)*(c+a)-d)/a}else{if(u<=0)return h>0?r<=h?1:6:r;s=((c>0?(r*(l+u)-h*l)/u:r)*(g+a)-f)/a}return s}function g(e){let t=String(null!=e?e:"");return t.includes('"')||t.includes(",")||t.includes("\n")||t.includes("\r")?'"'.concat(t.replace(/"/g,'""'),'"'):t}function p(e,t){let r=["Fachname","Kategorie","Notentyp","Bezeichnung","Note","Gewichtung","Datum","Notizen"].map(g),a=t.map(t=>{let r=e.find(e=>e.id===t.subjectId);return r?[r.name,r.category,t.type,t.name||"",t.value,t.weight,new Date(t.date).toLocaleDateString("de-DE"),t.notes||""].map(g).join(","):null}).filter(e=>null!==e);return[r.join(","),...a].join("\n")}let h=/(?:,|^)("(?:[^"]|"")*"|[^,]*)/g;async function m(e,t,r,a,i){let l=new Map(t.map(e=>[e.name.toLowerCase(),e])),o=[...t],u=[...r],d=e.split(/\r?\n/).slice(1),c=0,f=0,g=(0,s.wP)(n.db);for(let e of d){if(""===e.trim())continue;let[t,d,p,m,v,w,x,b]=function(e){let t,r=[];for(h.lastIndex=0;t=h.exec(e);){let e=t[1];e.startsWith('"')&&e.endsWith('"')&&(e=e.substring(1,e.length-1).replace(/""/g,'"')),r.push(e)}return r}(e);if(!t||!d||!p||!v||!w||!x){console.warn("Skipping invalid CSV line:",e),f++;continue}let j=parseFloat(v),y=parseFloat(w),N=x.split("."),S=new Date("".concat(N[2],"-").concat(N[1],"-").concat(N[0]));if(isNaN(j)||isNaN(y)||isNaN(S.getTime())){console.warn("Skipping line with invalid data:",e),f++;continue}let E=l.get(t.toLowerCase());if(!E){let e={gradeLevel:a,name:t,category:d},r=(0,s.H9)((0,s.rJ)(n.db,"users",i,"subjects"));g.set(r,e),E={id:r.id,...e},l.set(t.toLowerCase(),E),o.push(E)}let I={subjectId:E.id,type:p,name:m||void 0,value:j,weight:y,date:S.toISOString(),notes:b||void 0};if(r.some(e=>e.subjectId===I.subjectId&&e.value===I.value&&e.weight===I.weight&&new Date(e.date).toDateString()===new Date(I.date).toDateString()&&(e.name||"")===(I.name||"")))f++;else{let e=(0,s.H9)((0,s.rJ)(n.db,"users",i,"grades"));g.set(e,I),u.push({id:e.id,...I}),c++}}return c>0&&await g.commit(),{newSubjects:o,newGrades:u,importedCount:c,skippedCount:f}}},68856:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var a=r(95155),i=r(59434);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",t),...r})}},78347:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u,c:()=>o});var a=r(95155),i=r(12115),s=r(93004),n=r(56104),l=r(68856);let o=(0,i.createContext)({user:null,loading:!0,isFirebaseEnabled:n.Gg,firebaseError:null});function u(e){let{children:t}=e,[r,u]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0),[f,g]=(0,i.useState)(null),p=n.Gg&&!f;return((0,i.useEffect)(()=>{if(n.Gg){let e=(0,s.hg)(n.j2,e=>{u(e),g(null),c(!1)},e=>{console.error("Firebase Auth Error:",e),"auth/invalid-api-key"===e.code?g("API-Schl\xfcssel ung\xfcltig. Stelle sicher, dass 'Authentication' in deiner Firebase-Konsole aktiviert ist (Build > Authentication > Jetzt loslegen)."):g("Firebase Fehler: ".concat(e.message)),u(null),c(!1)});return()=>e()}c(!1)},[]),d)?(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-muted/40",children:[(0,a.jsx)("header",{className:"sticky top-0 z-30 w-full bg-background/80 backdrop-blur-sm border-b",children:(0,a.jsxs)("div",{className:"container mx-auto flex h-20 items-center justify-between px-4 md:px-6 lg:px-8",children:[(0,a.jsx)(l.E,{className:"h-8 w-32"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.E,{className:"h-10 w-24"}),(0,a.jsx)(l.E,{className:"h-10 w-10 rounded-full"})]})]})}),(0,a.jsx)("main",{className:"flex-1 container mx-auto p-4 md:p-6 lg:p-8",children:(0,a.jsx)(l.E,{className:"h-full w-full rounded-lg"})})]}):(0,a.jsx)(o.Provider,{value:{user:r,loading:d,isFirebaseEnabled:p,firebaseError:f},children:t})}},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var a=r(12115);let i=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],u={toasts:[]};function d(e){u=l(u,e),o.forEach(e=>{e(u)})}function c(e){let{...t}=e,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(u);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[675,992,644,645,659,930,441,684,358],()=>t(34900)),_N_E=e.O()}]);