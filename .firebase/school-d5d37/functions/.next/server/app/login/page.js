(()=>{var e={};e.id=520,e.ids=[520],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31257:(e,s,r)=>{Promise.resolve().then(r.bind(r,69488))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},57403:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var t=r(65239),i=r(48088),a=r(88170),l=r.n(a),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(s,o);let d={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,94934)),"/home/user/studio/src/app/login/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,48729)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/login/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69488:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>w});var t=r(60687),i=r(43210),a=r(16189),l=r(57782),n=r(75535),o=r(33784),d=r(29523),c=r(44493),u=r(89667),m=r(54300),p=r(85763),h=r(29867),x=r(4165),g=r(11516),j=r(31568),f=r(69918),v=r(8452);let b=()=>(0,t.jsx)("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,t.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 110.3 512 0 401.7 0 265.8 0 129.8 110.3 20 244 20c68.3 0 128.8 27.2 172.4 71.4l-64.5 64.5C323.5 125.7 286.4 104 244 104c-82.3 0-149.3 67-149.3 149.8s67 149.8 149.3 149.8c94.2 0 127.3-64.8 132.8-97.8H244v-75h244.1c2.1 12.8 3.9 26.1 3.9 40z"})}),N=()=>(0,t.jsxs)("div",{className:"relative my-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("span",{className:"w-full border-t"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Oder"})})]});function w(){let[e,s]=(0,i.useState)(""),[r,w]=(0,i.useState)(""),[y,q]=(0,i.useState)(""),[C,S]=(0,i.useState)(""),[P,A]=(0,i.useState)(""),[_,F]=(0,i.useState)("student"),[k,M]=(0,i.useState)(""),[z,G]=(0,i.useState)([]),[J,B]=(0,i.useState)(!1),[D,R]=(0,i.useState)(!1),H=(0,a.useRouter)(),{toast:$}=(0,h.dj)(),{isFirebaseEnabled:E,firebaseError:W}=(0,j.A)(),I=async s=>{s.preventDefault(),B(!0);try{await (0,l.x9)(o.j2,e,r),H.push("/dashboard")}catch(e){$({variant:"destructive",title:"Fehler bei der Anmeldung",description:e.message})}finally{B(!1)}},K=async(e,s)=>{let r=await (0,n.gS)((0,n.rJ)(o.db,"schools"),{name:e,address:s}),t={id:r.id,name:e,address:s};return G(e=>[...e,t].sort((e,s)=>e.name.localeCompare(s.name))),r.id},Z=async e=>{e.preventDefault(),B(!0);try{let e=(await (0,l.eJ)(o.j2,y,C)).user;await (0,l.r7)(e,{displayName:P}),await (0,n.BN)((0,n.H9)(o.db,"users",e.uid,"settings","main"),{selectedGradeLevel:10,mainSubjectWeight:2,minorSubjectWeight:1,theme:"blue",isDarkMode:!1,role:_,schoolId:k}),await (0,n.BN)((0,n.H9)(o.db,"profiles",e.uid),{uid:e.uid,name:P,email:y,bio:`Hallo, ich bin ${P}! Ich benutze Notio, um meinen Schulerfolg zu organisieren.`}),H.push("/dashboard")}catch(e){$({variant:"destructive",title:"Fehler bei der Registrierung",description:e.message})}finally{B(!1)}},L=async()=>{if(!E)return;R(!0);let e=new l.HF;try{let s=(await (0,l.df)(o.j2,e)).user,r=(0,n.H9)(o.db,"users",s.uid,"settings","main");(await (0,n.x7)(r)).exists()||await (0,n.BN)(r,{selectedGradeLevel:10,mainSubjectWeight:2,minorSubjectWeight:1,theme:"blue",isDarkMode:!1,role:"student",schoolId:""});let t=(0,n.H9)(o.db,"profiles",s.uid);(await (0,n.x7)(t)).exists()||await (0,n.BN)(t,{uid:s.uid,name:s.displayName,email:s.email,bio:`Hallo, ich bin ${s.displayName}! Ich benutze Notio, um meinen Schulerfolg zu organisieren.`}),H.push("/dashboard")}catch(e){$({variant:"destructive",title:"Fehler bei der Google-Anmeldung",description:e.message})}finally{R(!1)}};return E?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted/40 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)(x.g,{}),(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"Notio"})]}),(0,t.jsxs)(p.tU,{defaultValue:"login",className:"w-full max-w-sm",children:[(0,t.jsxs)(p.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(p.Xi,{value:"login",children:"Anmelden"}),(0,t.jsx)(p.Xi,{value:"register",children:"Registrieren"})]}),(0,t.jsx)(p.av,{value:"login",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Anmelden"}),(0,t.jsx)(c.BT,{children:"Melde dich bei deinem Konto an, um fortzufahren."})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"login-email",children:"Email"}),(0,t.jsx)(u.p,{id:"login-email",type:"email",placeholder:"deine@email.de",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"login-password",children:"Passwort"}),(0,t.jsx)(u.p,{id:"login-password",type:"password",value:r,onChange:e=>w(e.target.value),required:!0})]}),(0,t.jsxs)(d.$,{type:"submit",className:"w-full",disabled:J||D,children:[J&&(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]}),(0,t.jsx)(N,{}),(0,t.jsxs)(d.$,{variant:"outline",className:"w-full",onClick:L,disabled:J||D,children:[D?(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(b,{}),"Mit Google anmelden"]})]})]})}),(0,t.jsx)(p.av,{value:"register",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Konto erstellen"}),(0,t.jsx)(c.BT,{children:"Gib deine Daten ein, um ein neues Konto zu erstellen."})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"signup-name",children:"Name"}),(0,t.jsx)(u.p,{id:"signup-name",placeholder:"Max Mustermann",value:P,onChange:e=>A(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"signup-email",children:"Email"}),(0,t.jsx)(u.p,{id:"signup-email",type:"email",placeholder:"deine@email.de",value:y,onChange:e=>q(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"signup-password",children:"Passwort"}),(0,t.jsx)(u.p,{id:"signup-password",type:"password",value:C,onChange:e=>S(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Ich bin"}),(0,t.jsxs)(f.z,{onValueChange:e=>F(e),defaultValue:_,className:"flex space-x-4 pt-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.C,{value:"student",id:"role-student-signup"}),(0,t.jsx)(m.J,{htmlFor:"role-student-signup",className:"font-normal",children:"Sch\xfcler"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.C,{value:"teacher",id:"role-teacher-signup"}),(0,t.jsx)(m.J,{htmlFor:"role-teacher-signup",className:"font-normal",children:"Lehrer"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Schule"}),(0,t.jsx)(v.c,{schools:z,value:k,onChange:M,onAddSchool:K})]}),(0,t.jsxs)(d.$,{type:"submit",className:"w-full",disabled:J||D,children:[J&&(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]}),(0,t.jsx)(N,{}),(0,t.jsxs)(d.$,{variant:"outline",className:"w-full",onClick:L,disabled:J||D,children:[D?(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(b,{}),"Mit Google registrieren"]})]})]})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted/40 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)(x.g,{}),(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"Notio"})]}),(0,t.jsxs)("div",{className:"max-w-md w-full bg-card p-8 rounded-lg shadow-lg text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Demo Modus"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:W?`Firebase Fehler: ${W}`:"Firebase ist nicht konfiguriert. Die App l\xe4uft im Offline-Demo-Modus."}),(0,t.jsx)(d.$,{onClick:()=>H.push("/dashboard"),className:"mt-6",children:"Weiter zum Dashboard"})]})]})}},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},94809:(e,s,r)=>{Promise.resolve().then(r.bind(r,94934))},94934:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/login/page.tsx","default")}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,666,44,183,795,455],()=>r(57403));module.exports=t})();